<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <link rel="stylesheet" type="text/css" href="./css/aui.css" />
    <style type="text/css">
        .header {
            padding: 2.5rem 0.5rem 2rem 0.5rem;
        }

        footer .aui-iconfont {
            /*font-weight: bold;*/
        }
    </style>
</head>

<body>

    <header class="aui-bar aui-bar-nav aui-text-left header" id="header">
        <h1>
          <a class="aui-btn aui-pull-right" tapmode onclick="openClub()">
              <i class="aui-iconfont aui-icon-question"></i>
          </a>
          AUI 2.1
      </h1>
    </header>
    <footer class="aui-bar aui-bar-tab" id="footer">
        <div class="aui-bar-tab-item aui-active" tapmode>
            <i class="aui-iconfont aui-icon-home"></i>
            <div class="aui-bar-tab-label">首页</div>
        </div>
        <div class="aui-bar-tab-item" tapmode>
            <i class="aui-iconfont aui-icon-star"></i>
            <div class="aui-bar-tab-label">Client</div>
        </div>
        <div class="aui-bar-tab-item" tapmode>
            <div class="aui-badge">99</div>
            <i class="aui-iconfont aui-icon-cart"></i>
            <div class="aui-bar-tab-label">Server</div>
        </div>
        <div class="aui-bar-tab-item" tapmode>
            <div class="aui-dot"></div>
            <i class="aui-iconfont aui-icon-like"></i>
            <div class="aui-bar-tab-label">My</div>
        </div>
    </footer>
</body>
<script type="text/javascript" src="./script/api.js"></script>
<script type="text/javascript" src="./script/aui-tab.js"></script>
<script type="text/javascript">
    apiready = function() {
        api.setStatusBarStyle({
            style: 'light'
        });
        api.parseTapmode();

        var header_h = $api.offset($api.byId('header')).h;
        var footer_h = $api.offset($api.byId('footer')).h;
        var win_h = api.winHeight;
        var frm_h = win_h - header_h - footer_h;
        console.log('winHeight:' + api.winHeight);
        console.log('screeHeight:' + api.screeHeight);
        console.log('frameHeight:' + api.frameHeight);

        api.openFrame({
            name: 'index_frm',
            url: './html/index_frm.html',
            bounces: true,
            rect: {
                x: 0,
                y: header_h,
                w: 'auto',
                h: frm_h
            }
        });
        var tab = new auiTab({
            element: document.getElementById("footer")
        }, function(ret) {
            console.log(ret);
            var fname = 'test' + ret.index + '_frm.html';
            if (ret.index == 1) {
                fname = 'index_frm.html';
            }
            api.openFrame({
                name: fname,
                url: './html/' + fname,
                bounces: false,
                rect: {
                    x: 0,
                    y: header_h,
                    w: 'auto',
                    h: frm_h
                }
            });
        });
    };

    function openClub() {
        var delay = 0;
        if (api.systemType != 'ios') {
            delay = 300;
        }
        api.openWin({
            name: 'club_win',
            url: './html/club_win.html',
            bounces: false,
            delay: delay,
            slidBackEnabled: true,
            vScrollBarEnabled: false,
            progress: {
                type: "page"
            }
        });
    }

    function closeWin() {
        api.closeWin({});
    }
</script>

</html>
